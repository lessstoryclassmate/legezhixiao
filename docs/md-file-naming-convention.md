# MD 文件命名规范和数据交互文档

## 概述

本系统采用基于 Markdown 文件的统一数据交互方案，所有小说创作相关的数据都通过 MD 文件进行存储和传递。这样设计的优势包括：

1. **统一性**: 所有模块都使用相同的数据格式
2. **可读性**: MD 文件人类可读，便于调试和维护
3. **版本控制**: 可以使用 Git 等工具进行版本管理
4. **跨平台**: MD 文件可以在任何文本编辑器中打开
5. **扩展性**: 可以通过 YAML Front Matter 扩展元数据

## 文件命名规范

### 1. 小说主文件
- **格式**: `novel-{novelId}-main.md`
- **示例**: `novel-12345-main.md`
- **用途**: 存储小说的基本信息、大纲、设定等核心内容

### 2. 章节文件
- **格式**: `novel-{novelId}-chapter-{chapterNumber}.md`
- **示例**: `novel-12345-chapter-001.md`
- **规则**: 章节号使用3位数字，不足补零

### 3. 人物设定文件
- **格式**: `novel-{novelId}-character-{characterName}.md`
- **示例**: `novel-12345-character-张三.md`
- **规则**: 角色名中的特殊字符会被替换为下划线

### 4. 世界构建文件
- **格式**: `novel-{novelId}-world-{worldName}.md`
- **示例**: `novel-12345-world-东方大陆.md`
- **用途**: 存储世界观、地理、历史等设定

### 5. 情节设定文件
- **格式**: `novel-{novelId}-plot-{plotName}.md`
- **示例**: `novel-12345-plot-主线情节.md`
- **用途**: 存储情节线、冲突、发展等内容

### 6. 分析报告文件
- **格式**: `novel-{novelId}-analysis-{analysisType}-{timestamp}.md`
- **示例**: `novel-12345-analysis-plot-20231211_143022.md`
- **用途**: 存储各种分析结果（情节分析、人物分析、风格分析等）

### 7. 风格模板文件
- **格式**: `style-{styleName}-template.md`
- **示例**: `style-古风-template.md`
- **用途**: 存储不同的写作风格模板

### 8. 通用模板文件
- **格式**: `template-{templateType}-{templateName}.md`
- **示例**: `template-character-英雄模板.md`
- **用途**: 存储各种通用模板

## MD 文件结构规范

### 基本结构

```markdown
---
# YAML Front Matter (可选)
title: "文件标题"
type: "文件类型"
tags: ["标签1", "标签2"]
created_at: "2023-12-11T14:30:22Z"
updated_at: "2023-12-11T14:30:22Z"
---

# 主标题

## 基本信息
- 属性1: 值1
- 属性2: 值2
- 属性3: 值3

## 详细内容
具体的内容描述...

## 标签
标签1, 标签2, 标签3
```

### 小说主文件模板

```markdown
---
title: "小说标题"
type: "novel"
status: "创作中"
tags: ["玄幻", "穿越"]
---

# 小说标题

## 基本信息
- 作者: 作者名
- 类型: 小说类型
- 状态: 创作中
- 创建时间: 2023-12-11
- 预计字数: 100万字

## 简介
小说的简介内容...

## 大纲
### 第一卷: 卷名
- 第1章: 章节标题
- 第2章: 章节标题

### 第二卷: 卷名
- 第3章: 章节标题
- 第4章: 章节标题

## 主要人物
- 主角: 人物描述
- 配角: 人物描述

## 世界设定
世界观的基本设定...

## 标签
玄幻, 穿越, 升级, 热血
```

### 章节文件模板

```markdown
---
title: "第1章 章节标题"
type: "chapter"
chapter_number: 1
word_count: 3000
status: "已完成"
---

# 第1章 章节标题

## 章节信息
- 章节号: 1
- 字数: 3000
- 状态: 已完成
- 创建时间: 2023-12-11
- 前置章节: 无
- 后续章节: 第2章

## 章节大纲
本章节的主要内容概述...

## 正文内容
章节的具体内容...

## 人物出场
- 主角: 出场情况
- 配角: 出场情况

## 情节要点
- 关键事件1
- 关键事件2
- 伏笔设置

## 标签
开端, 人物介绍, 世界展现
```

### 人物设定文件模板

```markdown
---
title: "人物名称"
type: "character"
role: "主角"
importance: "高"
---

# 人物名称

## 基本信息
- 姓名: 全名
- 性别: 男/女
- 年龄: 具体年龄
- 职业: 职业描述
- 出生地: 出生地点
- 身份: 社会身份

## 外貌特征
- 身高: 具体数值
- 体重: 具体数值
- 发色: 头发颜色
- 瞳色: 眼睛颜色
- 特征: 明显特征

## 性格特点
- 主要性格: 性格描述
- 优点: 性格优点
- 缺点: 性格缺点
- 习惯: 行为习惯
- 爱好: 兴趣爱好

## 背景故事
人物的成长经历和背景...

## 能力设定
- 武力值: 数值
- 智力值: 数值
- 特殊能力: 能力描述
- 武器: 使用武器
- 技能: 掌握技能

## 人物关系
- 家族: 家族成员
- 朋友: 友好关系
- 敌人: 敌对关系
- 师父: 师承关系
- 徒弟: 传承关系

## 发展弧线
- 初始状态: 角色起点
- 成长过程: 发展历程
- 最终状态: 角色终点
- 关键转折: 重要节点

## 标签
主角, 修仙者, 天才, 重情重义
```

### 世界构建文件模板

```markdown
---
title: "世界名称"
type: "world"
scope: "大陆"
era: "古代"
---

# 世界名称

## 世界设定
- 世界名称: 具体名称
- 世界类型: 玄幻/科幻/现代
- 时代背景: 时代设定
- 地理环境: 地理特征
- 气候特征: 气候描述

## 社会结构
- 政治制度: 政治体系
- 经济体系: 经济模式
- 社会阶层: 阶层划分
- 文化传统: 文化特色
- 宗教信仰: 宗教设定

## 魔法/科技体系
- 力量体系: 力量分级
- 修炼体系: 修炼方法
- 技术水平: 科技程度
- 特殊物品: 神器法宝
- 禁忌限制: 规则限制

## 历史背景
- 创世神话: 世界起源
- 重要事件: 历史大事
- 著名人物: 历史人物
- 文明发展: 发展历程
- 战争冲突: 重大战争

## 重要地点
- 主要城市: 城市描述
- 名胜古迹: 重要地标
- 危险区域: 危险地带
- 秘境洞府: 隐秘地点
- 传送门径: 交通路线

## 种族设定
- 人类: 种族特征
- 精灵: 种族特征
- 兽人: 种族特征
- 龙族: 种族特征
- 其他: 特殊种族

## 标签
玄幻世界, 修仙大陆, 等级森严, 强者为尊
```

### 情节设定文件模板

```markdown
---
title: "情节名称"
type: "plot"
plot_type: "主线"
priority: "高"
---

# 情节名称

## 情节概述
情节的整体描述和目标...

## 关键事件
- 起因: 事件起因
- 经过: 发展过程
- 结果: 最终结果
- 影响: 后续影响

## 人物参与
- 主角: 参与方式
- 配角: 参与方式
- 反派: 参与方式
- 群演: 参与方式

## 情节发展
### 第一阶段: 铺垫
- 事件1: 事件描述
- 事件2: 事件描述

### 第二阶段: 发展
- 事件3: 事件描述
- 事件4: 事件描述

### 第三阶段: 高潮
- 事件5: 事件描述
- 事件6: 事件描述

### 第四阶段: 结局
- 事件7: 事件描述
- 事件8: 事件描述

## 冲突设置
- 内在冲突: 内心矛盾
- 人际冲突: 人物关系
- 社会冲突: 社会矛盾
- 环境冲突: 环境阻碍

## 伏笔设置
- 伏笔1: 伏笔内容
- 伏笔2: 伏笔内容
- 伏笔3: 伏笔内容

## 情节价值
- 推进作用: 对主线推进
- 人物发展: 对人物成长
- 世界展现: 对世界构建
- 主题体现: 对主题表达

## 标签
主线情节, 成长型, 冲突激烈, 转折重要
```

## 模块间数据交互规范

### 1. 情节生成器模块
- **读取**: 小说主文件、人物设定文件、世界构建文件
- **生成**: 情节设定文件、章节大纲文件
- **更新**: 小说主文件中的大纲部分

### 2. 人物生成器模块
- **读取**: 小说主文件、现有人物设定文件
- **生成**: 新的人物设定文件
- **更新**: 小说主文件中的人物列表

### 3. 世界构建模块
- **读取**: 小说主文件、现有世界构建文件
- **生成**: 世界构建文件、地点设定文件
- **更新**: 小说主文件中的世界设定部分

### 4. 情节分析模块
- **读取**: 章节文件、情节设定文件
- **生成**: 分析报告文件
- **输出**: 分析结果和建议

### 5. 文本优化模块
- **读取**: 章节文件、风格模板文件
- **生成**: 优化后的章节文件
- **输出**: 优化建议文件

### 6. 风格转换模块
- **读取**: 原文件、目标风格模板
- **生成**: 转换后的文件
- **输出**: 风格对比报告

## 文件关联关系

```
小说主文件 (novel-{id}-main.md)
├── 章节文件 (novel-{id}-chapter-{num}.md)
├── 人物设定 (novel-{id}-character-{name}.md)
├── 世界构建 (novel-{id}-world-{name}.md)
├── 情节设定 (novel-{id}-plot-{name}.md)
└── 分析报告 (novel-{id}-analysis-{type}-{time}.md)
```

## 元数据规范

### 通用元数据字段
- `title`: 文件标题
- `type`: 文件类型
- `created_at`: 创建时间
- `updated_at`: 更新时间
- `tags`: 标签列表
- `status`: 状态（草稿、完成、已发布等）
- `word_count`: 字数统计
- `author`: 作者信息

### 特定类型元数据
- **章节文件**: `chapter_number`, `volume`, `previous_chapter`, `next_chapter`
- **人物文件**: `role`, `importance`, `first_appearance`, `last_appearance`
- **世界文件**: `scope`, `era`, `geography_type`
- **情节文件**: `plot_type`, `priority`, `related_chapters`

## 最佳实践

1. **文件命名**: 严格遵循命名规范，保持一致性
2. **内容结构**: 使用统一的段落结构和标题层级
3. **元数据**: 充分利用 YAML Front Matter 存储结构化信息
4. **标签系统**: 使用有意义的标签便于分类和搜索
5. **版本控制**: 重要修改前备份，使用版本控制工具
6. **文档更新**: 及时更新相关文档，保持数据一致性

## 工具支持

- **编辑器**: 支持 Markdown 语法高亮和预览
- **解析器**: 自动解析文件结构和元数据
- **转换器**: 支持不同格式间的转换
- **验证器**: 验证文件格式和命名规范
- **分析器**: 提供内容分析和统计功能

通过这套规范，所有模块都能以最小的代价进行数据交互，同时保持数据的一致性和可维护性。
