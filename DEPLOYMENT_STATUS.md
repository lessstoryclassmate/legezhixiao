# ğŸš€ éƒ¨ç½²çŠ¶æ€æŠ¥å‘Š

**æ—¶é—´**: 2025-07-12  
**æäº¤**: 5f01ada  
**çŠ¶æ€**: âœ… å·²æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ŒGitHub Actions è‡ªåŠ¨éƒ¨ç½²å·²è§¦å‘

## ğŸ”§ è§£å†³çš„é—®é¢˜

### Docker é•œåƒæ‹‰å–å¤±è´¥é—®é¢˜
- **é—®é¢˜**: æ— æ³•ä» Docker Hub æ‹‰å– node:18-alpine, python:3.11-slim, nginx:alpine
- **åŸå› **: ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸­å›½å¤§é™†åœ°åŒºè®¿é—® Docker Hub å—é™
- **è§£å†³æ–¹æ¡ˆ**: å®ç°æ™ºèƒ½é•œåƒæºé…ç½®å’Œé‡è¯•æœºåˆ¶

## ğŸŒ ç½‘ç»œä¼˜åŒ–æªæ–½

### 1. æ™ºèƒ½é•œåƒæºé€‰æ‹©
```bash
# è‡ªåŠ¨æ£€æµ‹ Docker Hub è¿æ¥æ€§
if curl -s --connect-timeout 5 --max-time 10 https://registry-1.docker.io/v2/
```

### 2. é…ç½®å¤šä¸ªé•œåƒåŠ é€Ÿå™¨
- ä¸­ç§‘å¤§é•œåƒ: `docker.mirrors.ustc.edu.cn`
- ç½‘æ˜“é•œåƒ: `hub-mirror.c.163.com`
- é˜¿é‡Œäº‘é•œåƒ: `registry.cn-hangzhou.aliyuncs.com`
- Docker ä¸­å›½: `registry.docker-cn.com`
- ç™¾åº¦é•œåƒ: `mirror.baidubce.com`
- Docker ä»£ç†: `dockerproxy.com`

### 3. å¢å¼ºé‡è¯•æœºåˆ¶
- æœ€å¤§é‡è¯•æ¬¡æ•°: 3 æ¬¡
- è¶…æ—¶æ§åˆ¶: 300 ç§’
- é€’å¢ç­‰å¾…æ—¶é—´: 5s, 10s, 15s
- å¤±è´¥æ—¶è‡ªåŠ¨æ¸…ç†æ®‹ç•™

## ğŸ—ï¸ éƒ¨ç½²æµç¨‹ä¼˜åŒ–

### 1. åˆ†é˜¶æ®µé•œåƒæ‹‰å–
```bash
# é¢„æ‹‰å–åŸºç¡€é•œåƒ
BASE_IMAGES=(
    "node:18-alpine"
    "python:3.11-slim"
    "nginx:alpine"
)
```

### 2. æ™ºèƒ½æ„å»ºç­–ç•¥
- æ ‡å‡†æ„å»º â†’ åˆ†æ­¥æ„å»º â†’ æ— ç¼“å­˜æ„å»º
- è‡ªåŠ¨é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- æœåŠ¡å¯åŠ¨çŠ¶æ€ç›‘æ§

### 3. å¥åº·æ£€æŸ¥å¢å¼º
- åç«¯æœåŠ¡æ£€æŸ¥: 12 æ¬¡ Ã— 10s = 2 åˆ†é’Ÿ
- å‰ç«¯æœåŠ¡æ£€æŸ¥: 6 æ¬¡ Ã— 5s = 30 ç§’
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è¾“å‡º

## ğŸ“Š éƒ¨ç½²é…ç½®

### æœåŠ¡å™¨ä¿¡æ¯
- **IP**: 106.13.216.179
- **ç”¨æˆ·**: lessstoryclassmate
- **éƒ¨ç½²ç›®å½•**: /opt/ai-novel-editor

### æ•°æ®åº“é…ç½®
- **ç³»ç»Ÿæ•°æ®åº“**: 172.16.16.3:3306
- **ç”¨æˆ·æ•°æ®åº“**: 172.16.16.2:3306
- **Redis**: é…ç½®å¯†ç è®¤è¯

### API é…ç½®
- **SiliconFlow API**: deepseek-ai/DeepSeek-V3
- **ç«¯ç‚¹**: https://api.siliconflow.cn/v1/chat/completions

## ğŸ” ç›‘æ§å’ŒéªŒè¯

### è®¿é—®åœ°å€
- **å‰ç«¯**: http://106.13.216.179
- **API**: http://106.13.216.179:8000
- **å¥åº·æ£€æŸ¥**: http://106.13.216.179:8000/health

### å¸¸ç”¨å‘½ä»¤
```bash
# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
ssh user@106.13.216.179 "cd /opt/ai-novel-editor && docker-compose ps"

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
ssh user@106.13.216.179 "cd /opt/ai-novel-editor && docker-compose logs -f"

# é‡å¯æœåŠ¡
ssh user@106.13.216.179 "cd /opt/ai-novel-editor && docker-compose restart"
```

## ğŸ“ˆ GitHub Actions çŠ¶æ€

- **å·¥ä½œæµ**: Deploy AI Novel Editor (Clone Mode)
- **è§¦å‘**: main åˆ†æ”¯æ¨é€
- **çŠ¶æ€**: å·²è§¦å‘è‡ªåŠ¨éƒ¨ç½²
- **æŸ¥çœ‹**: https://github.com/lessstoryclassmate/legezhixiao/actions

## ğŸ¯ é¢„æœŸç»“æœ

1. **é•œåƒæ‹‰å–æˆåŠŸ**: é€šè¿‡é…ç½®çš„é•œåƒåŠ é€Ÿå™¨æˆåŠŸè·å–åŸºç¡€é•œåƒ
2. **æœåŠ¡æ­£å¸¸å¯åŠ¨**: å‰ç«¯å’Œåç«¯æœåŠ¡å¥åº·æ£€æŸ¥é€šè¿‡
3. **API å¯è®¿é—®**: å¥åº·æ£€æŸ¥ç«¯ç‚¹è¿”å›æ­£å¸¸çŠ¶æ€
4. **ç”¨æˆ·ç•Œé¢å¯ç”¨**: å‰ç«¯ç•Œé¢æ­£å¸¸åŠ è½½

---

âœ… **éƒ¨ç½²å·²å¯åŠ¨ï¼Œè¯·ç­‰å¾… GitHub Actions å®Œæˆè‡ªåŠ¨éƒ¨ç½²æµç¨‹**
